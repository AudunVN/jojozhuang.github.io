---
layout: tutorial
key: frontend
title: "Security Vulnerability of Dependencies for Node.js App"
index: 204
category: nodejs
image: nodejs.png
date: 2016-09-04
postdate: 2018-08-02
tags: [Node.js]
---

> Tutorial for remove security vulnerabilities for node js apps.

## 1. Warning from GitHub
For some of the repositories on GitHub, we get the warning 'We found a potential security vulnerability in one of your dependencies.'
![image](/public/tutorials/204/warn.png)

## 2. Vulnerability Detection
Use 'npm audit' to scan your Node.js app and detect any security vulnerability. To use it, you must upgrade 'npm' to version 6.
```sh
run npm install npm@latest -g
```
Go to the root folder of the app, run 'npm audit'. It will list out the vulnerable dependencies.
![image](/public/tutorials/204/audit1.png){:width="700px"}  
In the end, it shows the summary of the security vulnerabilities. In the example, we see there is one 'high' level vulnerability.
![image](/public/tutorials/204/audit2.png){:width="700px"}  

## 3. Removing Vulnerability
Run 'npm audit fix' command to automatically install compatible updates to vulnerable dependencies. In the below example, it fixed 9 of 15 vulnerabilities.
![image](/public/tutorials/204/fixed.png){:width="700px"}  
Run 'npm audit' again, we see there are still 6 vulnerable dependencies. However, there is no 'high' level vulnerability anymore.
![image](/public/tutorials/204/audit_fixed.png){:width="700px"}  
* If you want to fix more vulnerabilities, you may run 'npm audit fix --force' or 'npm upgrade' or fix them manually. For example, to fix the vulnerability in `hoek` package, just run 'npm install hoek' to install the latest version of hoek.

Submit all the changes to GitHub, the warning should be gone.
![image](/public/tutorials/204/nowarn.png)

## 4. References
* [Running a security audit with npm audit](https://docs.npmjs.com/getting-started/running-a-security-audit)
* [Vulnerability in hoek package #2926](https://github.com/request/request/issues/2926)
